<!DOCTYPE html>
<html>
<head>
<title>Geocoding service</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<style>
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}
#map {
  height: 100%;
}
#floating-panel {
  position: absolute;
  top: 10px;
  left: 25%;
  z-index: 5;
  background-color: #fff;
  padding: 5px;
  border: 1px solid #999;
  text-align: center;
  font-family: 'Roboto','sans-serif';
  line-height: 30px;
  padding-left: 10px;
}
</style>
</head>
<body>
<div id="floating-panel">
  <input id="address" type="textbox" value="Київ, Київська область">
  <input id="submit" type="button" value="Geocode">
  <input id="reset" type="button" value="reset">
  <input id="dataadress" type="textbox" value="">
</div>
<div id="map"></div>
<script>

function initMap() {
  var myCenter=new google.maps.LatLng(50.4501,30.5234);
  var mapProp = {
center:myCenter,
       zoom:5,
       mapTypeId:google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map"),mapProp)

    var geocoder = new google.maps.Geocoder();
  var infowindow = new google.maps.InfoWindow;

  document.getElementById('submit').addEventListener('click', function() {
      geocodeAddress(geocoder, map);
      });

  google.maps.event.addListener(map, 'click', function(event) {
      geocodeLatLng(geocoder, map, infowindow, event.latLng);
      });

  document.getElementById('reset').addEventListener('click', function() {

      var myCenter=new google.maps.LatLng(50.4501,30.5234);
      var mapProp = {
center:myCenter,
zoom:5,
mapTypeId:google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map(document.getElementById("map"),mapProp)

var geocoder = new google.maps.Geocoder();

document.getElementById('submit').addEventListener('click', function() {
  geocodeAddress(geocoder, map);
  });
google.maps.event.addListener(map, 'click', function(event) {
      geocodeLatLng(geocoder, map, infowindow, event.latLng);
      });
});

}

function geocodeAddress(geocoder, resultsMap) {
  var address = document.getElementById('address').value;
  geocoder.geocode({'address': address}, function(results, status) {
      if (status === google.maps.GeocoderStatus.OK) {
      resultsMap.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
map: resultsMap,
position: results[0].geometry.location
});
      } else {
      alert('Geocode was not successful for the following reason: ' + status);
      }
      });
}

function geocodeLatLng(geocoder, map, infowindow, location) {

  var latlng = {lat: location.lat(), lng: location.lng()};
  geocoder.geocode({'location': latlng}, function(results, status) {
      if (status === google.maps.GeocoderStatus.OK) {
      if (results[1]) {
      map.setZoom(9);
      var marker = new google.maps.Marker({
position: latlng,
map: map
});
      infowindow.setContent(results[1].formatted_address + "<br>" +location.lat() +"<br>"+ location.lng());
      infowindow.open(map, marker);
      var div = document.getElementById('dataadress').value=results[1].formatted_address;
      } else {
      window.alert('No results found');
      }
      } else {
      window.alert('Geocoder failed due to: ' + status);
      }
      });
}
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap&language=uk">
</script>
</body>
</html>
