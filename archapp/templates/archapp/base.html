{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        {% if title %}
        <title> {{title}}</title>
        {% else %}
        <title>{% trans "Archaeology database" %}</title>
        {% endif %}
        {% load staticfiles %}

        <!-- styles -->
        <link rel="stylesheet" type="text/css" href="{% static 'archapp/css/bootstrap.css' %}" />
        <link rel="stylesheet" type="text/css" href="{% static 'archapp/css/my.css' %}" />

        <!-- Font Awesome -->
        <script src="https://use.fontawesome.com/dba3bfc23e.js"></script>

        <!-- bootstrap -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

        <!-- bootstrap toggle -->
        <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
        <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

        <script type="text/javascript">
            var archapp = {}; 
            archapp.map = {};
            archapp.upload = {};
            archapp.map.handle = false;
            archapp.map.callbacks = [];
            archapp.upload.names = [];
            archapp.upload.handles = [];
        </script>

        <!--google maps-->
        {% if sview %}
        <script type="text/javascript">archapp.map.siteview = true;</script>
        {% endif %}
        <script src="{% static 'archapp/js/map.js' %}"></script>

        <!-- photo uploads -->
        <script src="{% static 'archapp/js/jquery.fine-uploader.min.js' %}" ></script>
        <link href="{% static 'archapp/css/fine-uploader.min.css' %}" media="screen" rel="stylesheet" type="text/css" />
        <script src="{% static 'file_form/file_form.js' %}"></script>

        <!-- jqueryui for slider -->
        <link href="{% static 'archapp/jquery-ui/jquery-ui.min.css' %}" media="all" rel="stylesheet" type="text/css" />
        <script src="{% static 'archapp/jquery-ui/jquery-ui.min.js' %}"></script>

        <!-- slider -->
        <script src="{% static 'archapp/js/slider.js' %}"></script>
        <!-- gallery -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/4.0.1/ekko-lightbox.min.css" type="text/css" rel="stylesheet"/>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/4.0.1/ekko-lightbox.min.js"></script>
    </head>

    <body class="background">
        <header class="header">
            <div class="container-fluid container-config textcol">
                <div class="col-lg-4 col-md-4 col-sm-4">
                    <a href = "{% url 'archapp:welcome' %}" class="btn btn-sm">
                        <h2 class="logo">{% trans "Archaeology database" %}</h2>
                    </a>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 text-center padding">
                    <form action="{% url "set_language" %}" method="post">
                        {% csrf_token %}
                        <select name="language" class="form-control form-custom" onchange="this.form.submit()">
                        {% get_language_info_list for LANGUAGES as langs %}
                        {% for lang in langs %}
                            <option value="{{ lang.code }}"
                                {% if lang.code == LANGUAGE_CODE %}selected="selected"{% endif %}>
                                {{ lang.name_local }}
                            </option>
                        {% endfor %}
                        </select>
                    </form>
                </div>
                {% if user.is_authenticated %}
                <div class="col-lg-2 col-md-2 col-sm-2 padding">
                    <form action="" class="form-inline box-shadow" method="post">
                        <input class="form-control form-custom" type="text" name="name_of_site" placeholder="{% trans 'Search sites' %}" />
                    </form>
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1 col-lg-offset-1 col-md-offset-1 col-sm-offset-1 text-center padding">
                    <a href ="{% url 'archapp:newsite'%}" class="btn btn-color btn-sm">{% trans "New site" %}</a>
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1 text-center padding">
                    <a href = "{% url 'archapp:allsites' %}" class="btn btn-color btn-sm">{% trans "All sites" %}</a>
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1 text-left padding">
                <div class="dropdown btn btn-color btn-sm">
                  <button id="dLabel" class="dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" value="Profile">
                    Profile
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu pull-right text-left" aria-labelledby="dLabel">
                    <li>
                    <a href = "{% url 'archapp:userprofile' user %}" class="btn btn-color btn-sm">{% trans "My Profile" %}</a>
                    </li>
                    <li>
                    <a href = "{% url 'archapp:user-update' user %}" class="btn btn-color btn-sm">{% trans "Update Profile" %}</a>
                    </li>

                    <li>
                    <a href = "{% url 'archapp:logout' %}" class="btn btn-color btn-sm">{% trans "Log out" %}</a>
                    </li>
                  </ul>
                </div>
              </div>
                {% else %}
                <div class="col-lg-1 col-md-1 col-sm-1 col-lg-offset-4 col-md-offset-4 col-sm-offset-4 text-center padding">
                    <a href = "{% url 'archapp:signup' %}" class="btn btn-color btn-sm">{% trans "Register" %}</a>
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1 text-center padding">
                    <a href = "{% url 'archapp:login' %}" class="btn btn-color btn-sm">{% trans "Log in" %}</a>
                </div>
                {% endif %}
            </div>
          </header>

          <div class="container-fluid content nopadding">
            {% block content %}{% endblock %}
          </div>
          <footer class="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-11 col-md-11 col-sm-11 text-right">
                        <strong class="signature">Written by BB &amp; lyssdod</strong>
                    </div>
                </div>
            </div>
        </footer>

        <!-- need to specify a key -->
        {% if user.is_authenticated %}
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC7hR2y6U_aLIi8BywyjdaMMXCoYmYTCdA&callback=initmap&language={{LANGUAGE_CODE}}"></script>
        {% endif %}

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-61931590-2', 'auto');
	  ga('send', 'pageview');
	</script>
    </body>
</html>

